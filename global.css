@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --sky: #0ea5e9;
    --sky-dark: #0284c7;
    --sky-light: #e0f2fe;
    --mint: #10b981;
    --lavender: #8b5cf6;
    --rose: #f43f5e;
    --amber: #f59e0b;
    --bg: #f8fafc;
    --surface: #ffffff;
    --text: #0f172a;
    --text-muted: #64748b;
    --border: #e2e8f0;
    --radius: 20px;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  html {
    scroll-behavior: smooth;
    -webkit-tap-highlight-color: transparent;
    /* PWA: use full height including notch / home indicator areas */
    height: 100%;
  }

  body {
    font-family: 'Plus Jakarta Sans', sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    overflow-x: hidden;
    /* PWA: respect safe areas on iPhone notch / Dynamic Island */
    padding-top:    env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left:   env(safe-area-inset-left);
    padding-right:  env(safe-area-inset-right);
    min-height: 100dvh; /* Dynamic viewport height — fixes iOS bottom bar */
  }

  h1, h2, h3, h4 {
    font-family: 'DM Serif Display', serif;
    line-height: 1.15;
    letter-spacing: -0.02em;
  }

  ::selection {
    background: #bae6fd;
    color: #0c4a6e;
  }

  /* Prevent text size adjustment on orientation change (iOS) */
  html { -webkit-text-size-adjust: 100%; }
}

@layer components {

  /* ── Buttons ── */
  .btn {
    @apply inline-flex items-center justify-center gap-2 font-semibold rounded-2xl
           transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-40 disabled:cursor-not-allowed select-none;
  }
  .btn-primary {
    @apply btn bg-sky-500 hover:bg-sky-600 active:bg-sky-700 text-white
           shadow-[0_4px_14px_rgba(14,165,233,0.35)] hover:shadow-[0_6px_20px_rgba(14,165,233,0.45)]
           hover:-translate-y-0.5 active:translate-y-0 focus:ring-sky-400 py-3 px-6 text-sm;
  }
  .btn-secondary {
    @apply btn bg-white hover:bg-sky-50 text-sky-600 border border-sky-200 hover:border-sky-400
           hover:-translate-y-0.5 active:translate-y-0 focus:ring-sky-300 py-3 px-6 text-sm;
  }
  .btn-ghost {
    @apply btn text-slate-600 hover:bg-slate-100 hover:text-slate-900 focus:ring-slate-300 py-2 px-4 text-sm;
  }
  .btn-danger {
    @apply btn bg-rose-500 hover:bg-rose-600 text-white shadow-[0_4px_14px_rgba(244,63,94,0.3)]
           hover:-translate-y-0.5 focus:ring-rose-400 py-3 px-6 text-sm;
  }

  /* ── Cards ── */
  .card {
    @apply bg-white rounded-3xl border border-slate-100 p-6;
    box-shadow: 0 1px 3px rgba(0,0,0,0.04), 0 4px 16px rgba(0,0,0,0.04);
  }
  .card-hover {
    @apply card transition-all duration-300 hover:-translate-y-1 cursor-pointer;
    &:hover { box-shadow: 0 8px 32px rgba(14,165,233,0.12), 0 2px 8px rgba(0,0,0,0.06); }
  }
  .card-glass {
    @apply rounded-3xl border border-white/60 backdrop-blur-xl;
    background: rgba(255,255,255,0.85);
    box-shadow: 0 8px 32px rgba(0,0,0,0.08);
  }

  /* ── Inputs ── */
  .input {
    @apply w-full bg-slate-50 border border-slate-200 text-slate-800 rounded-2xl px-4 py-3
           focus:outline-none focus:ring-2 focus:ring-sky-400 focus:border-transparent
           placeholder:text-slate-400 transition-all duration-200 text-sm;
  }
  .input:focus { background: white; }

  /* ── Badge ── */
  .badge {
    @apply inline-flex items-center gap-1 text-xs font-semibold px-2.5 py-1 rounded-full;
  }

  /* ── Typography ── */
  .heading-xl { @apply font-display text-5xl md:text-7xl tracking-tight; }
  .heading-lg { @apply font-display text-3xl md:text-4xl tracking-tight; }
  .heading-md { @apply font-display text-2xl tracking-tight; }
  .text-gradient-sky {
    @apply bg-gradient-to-r from-sky-600 via-sky-500 to-cyan-400 bg-clip-text text-transparent;
  }
  .text-gradient-warm {
    @apply bg-gradient-to-r from-violet-600 to-sky-500 bg-clip-text text-transparent;
  }

  /* ── Chat bubbles ── */
  .bubble-user {
    @apply bg-sky-500 text-white rounded-3xl rounded-br-lg px-4 py-3 max-w-[80%] ml-auto text-sm leading-relaxed;
  }
  .bubble-bot {
    @apply bg-white text-slate-700 rounded-3xl rounded-bl-lg px-4 py-3 max-w-[80%] text-sm leading-relaxed;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  }

  /* ── Section layouts ── */
  .page-container {
    @apply min-h-screen bg-gradient-to-br from-slate-50 via-sky-50/30 to-slate-50 pt-20 pb-12;
  }
  .content-wrapper {
    @apply max-w-4xl mx-auto px-4 space-y-6;
  }
  .section-header {
    @apply flex items-center justify-between mb-5;
  }

  /* ── PWA safe-area helpers ── */
  /* Use these on elements that need to respect device notches */
  .safe-top    { padding-top:    env(safe-area-inset-top); }
  .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  .safe-left   { padding-left:   env(safe-area-inset-left); }
  .safe-right  { padding-right:  env(safe-area-inset-right); }
}

/* ── Animations ── */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(24px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
@keyframes float {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  33%  { transform: translateY(-12px) rotate(1deg); }
  66%  { transform: translateY(-6px) rotate(-1deg); }
}
@keyframes breathe {
  0%, 100% { transform: scale(1); opacity: 0.7; }
  50%  { transform: scale(1.18); opacity: 1; }
}
@keyframes shimmer {
  0%   { background-position: -200% center; }
  100% { background-position: 200% center; }
}
@keyframes slideIn {
  from { opacity: 0; transform: translateX(-16px); }
  to   { opacity: 1; transform: translateX(0); }
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to   { opacity: 1; transform: translateY(0); }
}
@keyframes popIn {
  0%   { transform: scale(0.8); opacity: 0; }
  70%  { transform: scale(1.05); }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes pulse-ring {
  0%   { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(14,165,233,0.4); }
  70%  { transform: scale(1); box-shadow: 0 0 0 12px rgba(14,165,233,0); }
  100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(14,165,233,0); }
}
@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50%       { background-position: 100% 50%; }
}

.animate-fade-up    { animation: fadeUp 0.5s ease-out both; }
.animate-fade-in    { animation: fadeIn 0.4s ease-out both; }
.animate-float      { animation: float 6s ease-in-out infinite; }
.animate-breathe    { animation: breathe 4s ease-in-out infinite; }
.animate-slide-in   { animation: slideIn 0.35s ease-out both; }
.animate-slide-up   { animation: slideUp 0.35s ease-out both; }  /* ← new: for banners */
.animate-pop-in     { animation: popIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) both; }
.animate-pulse-ring { animation: pulse-ring 2s ease-out infinite; }

/* Stagger delays */
.delay-100  { animation-delay: 0.1s; }
.delay-200  { animation-delay: 0.2s; }
.delay-300  { animation-delay: 0.3s; }
.delay-400  { animation-delay: 0.4s; }
.delay-500  { animation-delay: 0.5s; }

/* ── Scrollbar ── */
::-webkit-scrollbar { width: 5px; height: 5px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

/* ── Mood ring ── */
.mood-btn {
  transition: transform 0.2s cubic-bezier(0.34, 1.56, 0.64, 1), box-shadow 0.2s;
}
.mood-btn:hover { transform: scale(1.15) translateY(-2px); }
.mood-btn.active { transform: scale(1.2) translateY(-3px); }

/* ── Gradient mesh background ── */
.mesh-bg {
  background-color: #f0f9ff;
  background-image:
    radial-gradient(at 20% 20%, rgba(14,165,233,0.08) 0px, transparent 50%),
    radial-gradient(at 80% 10%, rgba(139,92,246,0.06) 0px, transparent 50%),
    radial-gradient(at 10% 80%, rgba(16,185,129,0.06) 0px, transparent 50%),
    radial-gradient(at 90% 90%, rgba(245,158,11,0.06) 0px, transparent 50%);
}

/* ── Shimmer loading ── */
.shimmer {
  background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
}

/* ── Gradient animated button ── */
.btn-gradient {
  background: linear-gradient(135deg, #0ea5e9, #8b5cf6, #0ea5e9);
  background-size: 200% 200%;
  animation: gradientShift 4s ease infinite;
  color: white;
  font-weight: 600;
  border-radius: 16px;
  padding: 12px 28px;
  border: none;
  cursor: pointer;
  transition: transform 0.2s, box-shadow 0.2s;
  box-shadow: 0 4px 20px rgba(14,165,233,0.4);
}
.btn-gradient:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 28px rgba(14,165,233,0.5);
}

/* ── Progress bar ── */
.progress-bar {
  height: 6px;
  background: #e2e8f0;
  border-radius: 99px;
  overflow: hidden;
}
.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #0ea5e9, #38bdf8);
  border-radius: 99px;
  transition: width 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* ── Stat number ── */
.stat-number {
  font-family: 'DM Serif Display', serif;
  font-size: 2rem;
  line-height: 1;
  background: linear-gradient(135deg, #0369a1, #0ea5e9);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ── Floating orbs (decorative) ── */
.orb {
  position: absolute;
  border-radius: 50%;
  filter: blur(60px);
  pointer-events: none;
  z-index: 0;
}
.orb-sky   { background: rgba(14,165,233,0.12); }
.orb-violet { background: rgba(139,92,246,0.08); }
.orb-mint  { background: rgba(16,185,129,0.08); }

/* ── Crisis banner ── */
.crisis-banner {
  @apply bg-gradient-to-r from-rose-50 to-orange-50 border border-rose-200 rounded-2xl p-4;
  animation: fadeUp 0.3s ease-out;
}

/* ── Typing dots ── */
.typing-dot {
  width: 7px; height: 7px;
  background: #94a3b8;
  border-radius: 50%;
  animation: bounce 1.2s ease-in-out infinite;
}
.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }
@keyframes bounce {
  0%, 60%, 100% { transform: translateY(0); }
  30% { transform: translateY(-6px); }
}

/* ── Smooth page transitions ── */
.page-enter { animation: fadeUp 0.4s ease-out both; }